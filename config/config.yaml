# Streamware Orchestrator Configuration

# ============================================
# AUDIO SETTINGS
# ============================================
audio:
  enabled: true
  sample_rate: 16000
  channels: 1
  
  # Voice Activity Detection
  vad:
    enabled: true
    mode: 3
    silence_duration: 0.8
  
  # Speech-to-Text (Faster-Whisper)
  stt:
    model: "small"  # tiny, base, small, medium
    language: "pl"  # pl, en, auto
    device: "cuda"  # cuda, cpu
    compute_type: "float16"
  
  # Text-to-Speech (Piper)
  tts:
    model: "pl_PL-gosia-medium"
    model_path: "models/piper/pl_PL-gosia-medium.onnx"
    length_scale: 1.0
    sample_rate: 22050

# ============================================
# LLM SETTINGS
# ============================================
llm:
  provider: "ollama"
  model: "phi3:mini"
  base_url: "http://localhost:11434"
  temperature: 0.3  # Lower for DSL generation
  max_tokens: 256
  timeout: 30.0

# ============================================
# MQTT SETTINGS
# ============================================
mqtt:
  enabled: true
  broker: "localhost"  # or "mqtt" in Docker
  port: 1883
  # username: ""
  # password: ""
  client_id: "streamware-orchestrator"
  
  topics:
    commands: "commands/#"
    events: "events/#"
    sensors: "edge/sensors"
    tts: "audio/tts"
    stt: "audio/stt"

# ============================================
# ADAPTERS
# ============================================
adapters:
  enabled:
    - docker
    - mqtt
    - firmware
    - vision
  
  # Docker settings
  docker:
    socket: "unix:///var/run/docker.sock"
    timeout: 30
  
  # Firmware/IoT settings
  firmware:
    simulation: true  # Use simulated sensors

# ============================================
# VISION SETTINGS
# ============================================
vision:
  # Object detection model
  model: "yolov8n"  # yolov8n, yolov8s, yolov8m
  model_path: null  # Optional: path to TensorRT engine
  confidence: 0.5
  iou_threshold: 0.45
  max_detections: 20
  
  # Processing
  process_every_n_frames: 5
  translate_labels: true
  
  # Cameras (auto-loaded on startup)
  cameras:
    # USB camera example
    - source: 0
      name: "usb_cam"
      width: 640
      height: 480
      fps: 30
      use_gstreamer: false
    
    # RTSP camera example (uncomment to use)
    # - source: "rtsp://192.168.1.100:554/stream1"
    #   name: "ip_camera"
    #   width: 1280
    #   height: 720
    #   rtsp_transport: "tcp"
    #   use_gstreamer: true
    #   use_hw_decode: true  # For Jetson
    
    # HTTP MJPEG example (uncomment to use)
    # - source: "http://192.168.1.101/video.mjpg"
    #   name: "webcam"

# ============================================
# TEXT2DSL SETTINGS
# ============================================
text2dsl:
  llm_fallback: true
  cache_enabled: true

# ============================================
# LOGGING
# ============================================
logging:
  level: "INFO"
  format: "%(asctime)s | %(levelname)-8s | %(name)-15s | %(message)s"
