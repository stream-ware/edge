# ============================================
# STREAMWARE ORCHESTRATOR - Environment Configuration
# ============================================
# Copy this file to .env and adjust values as needed.
# All variables use STREAMWARE__ prefix for namespacing.
# Nested config uses double underscore: STREAMWARE__SECTION__KEY=value
#
# Example: STREAMWARE__AUDIO__STT__MODEL=small
#          maps to config["audio"]["stt"]["model"] = "small"
# ============================================

# ============================================
# GENERAL
# ============================================
STREAMWARE_MODE=docker                    # docker | embedded
STREAMWARE_LOG_LEVEL=INFO                 # DEBUG | INFO | WARNING | ERROR

# ============================================
# AUDIO / STT (Speech-to-Text)
# ============================================
STREAMWARE__AUDIO__ENABLED=true
STREAMWARE__AUDIO__SAMPLE_RATE=16000
STREAMWARE__AUDIO__CHANNELS=1
# Device index or name (empty = default)
STREAMWARE__AUDIO__INPUT_DEVICE=

# STT Engine (Faster-Whisper)
STREAMWARE__AUDIO__STT__MODEL=small       # tiny | base | small | medium | large
STREAMWARE__AUDIO__STT__LANGUAGE=pl       # pl | en | auto
STREAMWARE__AUDIO__STT__DEVICE=auto       # auto | cuda | cpu
STREAMWARE__AUDIO__STT__COMPUTE_TYPE=auto # auto | float16 | float32 | int8

# VAD (Voice Activity Detection)
STREAMWARE__AUDIO__VAD__ENABLED=true
STREAMWARE__AUDIO__VAD__MODE=3            # 0-3 (3 = most aggressive)
STREAMWARE__AUDIO__VAD__SILENCE_DURATION=0.8
STREAMWARE__AUDIO__VAD__MAX_BUFFER_SECONDS=10.0

# TTS (Text-to-Speech / Piper)
STREAMWARE__AUDIO__TTS__MODEL=pl_PL-gosia-medium
STREAMWARE__AUDIO__TTS__LENGTH_SCALE=1.0
STREAMWARE__AUDIO__TTS__SAMPLE_RATE=22050

# ============================================
# LLM (Ollama)
# ============================================
STREAMWARE__LLM__PROVIDER=ollama
STREAMWARE__LLM__MODEL=phi3:mini
STREAMWARE__LLM__BASE_URL=http://localhost:11434
STREAMWARE__LLM__TEMPERATURE=0.3
STREAMWARE__LLM__MAX_TOKENS=256
STREAMWARE__LLM__TIMEOUT=30.0

# Shorthand (also supported):
# OLLAMA_HOST=http://localhost:11434

# ============================================
# MQTT
# ============================================
STREAMWARE__MQTT__ENABLED=true
STREAMWARE__MQTT__BROKER=localhost        # Use "mqtt" in Docker
STREAMWARE__MQTT__PORT=1883
STREAMWARE__MQTT__USERNAME=
STREAMWARE__MQTT__PASSWORD=
STREAMWARE__MQTT__CLIENT_ID=streamware-orchestrator

# Shorthand (also supported):
# MQTT_BROKER=localhost
# MQTT_PORT=1883

# ============================================
# DOCKER
# ============================================
STREAMWARE__ADAPTERS__DOCKER__SOCKET=unix:///var/run/docker.sock
STREAMWARE__ADAPTERS__DOCKER__TIMEOUT=30

# ============================================
# VISION (YOLO)
# ============================================
STREAMWARE__VISION__MODEL=yolov8n         # yolov8n | yolov8s | yolov8m
STREAMWARE__VISION__CONFIDENCE=0.5
STREAMWARE__VISION__IOU_THRESHOLD=0.45
STREAMWARE__VISION__MAX_DETECTIONS=20
STREAMWARE__VISION__PROCESS_EVERY_N_FRAMES=5

# ============================================
# ADAPTERS
# ============================================
# Comma-separated list of enabled adapters
STREAMWARE__ADAPTERS__ENABLED=docker,mqtt,firmware,vision,env

# Firmware simulation mode
STREAMWARE__ADAPTERS__FIRMWARE__SIMULATION=true

# Env adapter
STREAMWARE__ADAPTERS__ENV__PATH=.env

# ============================================
# EMBEDDED MODE (Jetson/Edge)
# ============================================
STREAMWARE__EMBEDDED__POWER_MODE=0        # 0=MAXN, 1=15W, 2=7W
STREAMWARE__EMBEDDED__GPU_MEMORY_FRACTION=0.8
STREAMWARE__EMBEDDED__USE_TENSORRT=true
STREAMWARE__EMBEDDED__USE_GSTREAMER=true

# ============================================
# DOCKER COMPOSE PORTS (for docker-compose.yml)
# ============================================
WEBAPP_PORT=8080
MQTT_PORT_EXTERNAL=1883
MOSQUITTO_WS_PORT=9001

# ============================================
# GPU AUTO-DETECTION
# ============================================
# When DEVICE=auto, system will:
# 1. Check if CUDA is available
# 2. Check if cuDNN libraries are accessible
# 3. Fall back to CPU if GPU not usable
#
# Force CPU mode by setting:
# STREAMWARE__AUDIO__STT__DEVICE=cpu
# STREAMWARE__AUDIO__STT__COMPUTE_TYPE=float32
